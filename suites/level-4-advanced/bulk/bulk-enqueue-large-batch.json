{
  "test_id": "L4-BULK-003",
  "level": 4,
  "category": "bulk",
  "name": "bulk-enqueue-large-batch",
  "description": "Batch enqueuing 100 jobs in a single request MUST create all 100 jobs successfully. This tests the server's capacity to handle larger batch sizes. The response MUST confirm all 100 jobs were created.",
  "spec_ref": "ojs-json-format#section-10",
  "tags": [
    "level-4",
    "bulk",
    "large-batch",
    "capacity"
  ],
  "steps": [
    {
      "id": "step-1",
      "description": "Batch enqueue 100 jobs in a single request",
      "action": "POST",
      "intent": "bulk-enqueue",
      "path": "/ojs/v1/jobs/batch",
      "headers": {
        "Content-Type": "application/openjobspec+json"
      },
      "body": {
        "jobs": [
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 0
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 1
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 2
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 3
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 4
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 5
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 6
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 7
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 8
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 9
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 10
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 11
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 12
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 13
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 14
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 15
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 16
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 17
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 18
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 19
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 20
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 21
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 22
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 23
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 24
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 25
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 26
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 27
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 28
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 29
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 30
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 31
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 32
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 33
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 34
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 35
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 36
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 37
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 38
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 39
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 40
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 41
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 42
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 43
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 44
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 45
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 46
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 47
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 48
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 49
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 50
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 51
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 52
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 53
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 54
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 55
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 56
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 57
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 58
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 59
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 60
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 61
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 62
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 63
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 64
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 65
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 66
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 67
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 68
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 69
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 70
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 71
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 72
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 73
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 74
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 75
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 76
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 77
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 78
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 79
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 80
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 81
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 82
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 83
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 84
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 85
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 86
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 87
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 88
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 89
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 90
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 91
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 92
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 93
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 94
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 95
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 96
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 97
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 98
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          },
          {
            "type": "bulk.test.large",
            "args": [
              {
                "i": 99
              }
            ],
            "options": {
              "queue": "bulk-large-test"
            }
          }
        ]
      },
      "assertions": {
        "status": 201,
        "body": {
          "$.jobs": "array:length:100",
          "$.jobs[0].id": "string:uuidv7",
          "$.jobs[0].state": "available",
          "$.jobs[99].id": "string:uuidv7",
          "$.jobs[99].state": "available"
        }
      }
    },
    {
      "id": "step-2",
      "description": "Verify queue stats confirm all 100 jobs are available",
      "action": "GET",
      "intent": "queue-stats",
      "path": "/ojs/v1/queues/bulk-large-test/stats",
      "headers": {
        "Accept": "application/openjobspec+json"
      },
      "assertions": {
        "status": 200,
        "body": {
          "$.queue.name": "bulk-large-test",
          "$.queue.available": 100
        }
      }
    }
  ]
}
